assList.remove("active"),window.setImmediate(function(){h.layout(!0)}));document.removeEventListener("mousemove",o);document.removeEventListener("mouseup",s)},e;n.button===0&&(e=n.target,f=parseInt(e.getAttribute("grid-splitter-index"),10),t=this._columns[f],r=this._columns[f+1],t.fixed||r.fixed||(e.classList.add("active"),u=n.clientX,document.addEventListener("mousemove",o),document.addEventListener("mouseup",s)))},c.prototype._moveSizingElement=function(n){var r=this._measurements.gutterWidth,t,i;if(!this._sizingElement){if(n<0)return;this._sizingElement=this.createElementWithClass("div","grid-column-sizing");this._canvas.appendChild(this._sizingElement)}if(this._sizingElement.style.height=this._canvas.clientHeight-1+"px",this._sizingElement.style.top=this._scrollTop+"px",n<0)this._sizingElement.style.left="-5000px",this._sizingElement.style.top="-5000px",this._sizingElement.style.height="0px";else{for(t=0;t<=n;)i=this._columns[t++],i.hidden||(r+=i.width);this._sizingElement.style.left=r-1+"px"}},c.prototype._getVisibleColumnIndex=function(n){var t=0,i=0,r=this._columns.length;if(this._columns[n].hidden)return-1;while(t<n)this._columns[t].hidden||i++,t++;return i},c.prototype._applyColumnSizing=function(n,t,i){var e=this._getVisibleColumnIndex(n)+1,r=this._columns[n],u=!1,f;t=t||-1;r&&(u=r.width!==t,f=this.rootElement.querySelector(".grid-header-canvas .grid-header-column:nth-child("+e+")"),f.style.width=r.width+"px");i===!0&&(u&&this.layout(),this._onColumnResize(r))},c.prototype._onColumnResize=function(n){this.fireCustomEvent(this._element,"columnresize",[n])},c.prototype._tryFinishColumnSizing=function(n){var t=this._columnSizing;t&&(t.active===!0&&(n||this._applyColumnSizing(t.index,t.originalWidth,!0),this._moveSizingElement(-1)),this._columnSizing=null,this._clearMoveEvents())},c.prototype._getSortColumns=function(n){for(var r,u,f=this._columns,i=[],t=0,e=n.length;t<e;t++)u=n[t],f.forEach(function(n){if(n.index===u.index)return r=n,!1}),i.push(r);return i},c.prototype._sortBy=function(n,t,i){var r=this._sortOrder.slice(0),o=!1,f,s,u,h;if(n){for(f=0,s=r.length;f<s;f++)if(u=r[f],u.index===n.index){r.splice(f,1);o=!0;break}u=o?new e(u.index,u.order==="asc"?"desc":"asc"):new e(n.index,"asc");t&&this._options.allowSortOnMultiColumns?r.push(u):r=[u]}h=this._getSortColumns(r);this._onSort(r,h,i)},c.prototype._onSort=function(n,t,i){i===void 0&&(i=!1);this.onSort(n,t,i)!==!1&&this.fireCustomEvent(this._element,"sort",[{sortOrder:n,sortColumns:t}])},c.prototype.onSort=function(n,t,i){return i===void 0&&(i=!1),this._options.autoSort&&(this._trySorting(n,t,i),this._sortOrder=n,this.layout()),!0},c.prototype._trySorting=function(n,t,i){var p=this,s,h,l,a,e,v,r,u,y;i===void 0&&(i=!1);t||(t=this._getSortColumns(n));s=[];h=0;for(l in this._selectedRows)u=this._selectedRows[l],a=this._dataSource[u],a&&(s.push(a),h+=parseInt(l));for(e=new o(null,null),c.addItemsToTree(this._dataSource,this._expandStates,0,this._dataSource.length,e),this._sortOrder&&this._sortOrder.length===1&&n.length===1&&this._sortOrder[0]!==n[0]&&this._sortOrder[0].index===n[0].index&&!i?this._sortOrder[0].order!==n[0].order&&c.walkTree(e,function(i){f.TreeNodeSort.stableReverse(i.children,function(i,r){return f.TreeNodeSort.sortComparer(n,t,i.data,r.data)})}):c.walkTree(e,function(i){i.children.sort(function(i,r){return f.TreeNodeSort.sortComparer(n,t,i.data,r.data)})}),this._dataSource=[],this._expandStates=[],r=0;r<e.children.length;r++)c.walkTree(e.children[r],function(n){p._dataSource.push(n.data);p._expandStates.push(n.expandState)});if(this._indentLevels=c.expand(this._expandStates),this._updateRanges(),this._selectionCount>0){for(this._clearSelection(),v=0,r=0;r<s.length;r++)u=this._dataSource.indexOf(s[r]),u>=0&&(y=this._getRowIndex(u),this._addSelection(y,u),v+=y);this._scrollTop+=(v-h)/this._selectionCount*this._measurements.rowHeight}},c.prototype._onCanvasScroll=function(){var n=this._canvas;return this._resetScroll=!0,this._scrollLeft=n.scrollLeft,this._scrollTop=n.scrollTop,this._ignoreScroll||(this._notifyForPrerender(),this._redraw(),this._scrollRenderComplete&&(this._scrollRenderComplete(),this._scrollRenderComplete=null)),!1},c.prototype.getRowInfoFromEvent=function(n,t){var i=this.findClosestElement(n.target,t);return this._rowInfoMap[i.id]},c.prototype._getClickedCell=function(n){return this.findClosestElement(n.target,".grid-cell")},c.prototype._isCellEditing=function(n){return n.querySelectorAll(".grid-edit-box").length===1},c.prototype.createEditBox=function(n,i,r){if(this._options.isGridEnabled){typeof this._options.preEditCellCallback!="undefined"&&this._options.preEditCellCallback(n,i);var f,u=this.getColumns()[i];u.getEditBox&&(f=u.getEditBox(n,u));this._editBoxControl=new t.GridCellEditControl(n,i,r,this,this._options,f);r.innerHTML="";r.appendChild(this._editBoxControl.inputElement);try{this._editBoxControl.inputElement.select();this._editBoxControl.inputElement.focus()}catch(e){}}},c.prototype.onEditCell=function(n){var e=n.target,t,r,i;if(!e.classList.contains("grid-tree-icon")){if(t=this._getClickedCell(n),this._isCellEditing(t))return;if(t&&t.classList.contains("grid-cell-editable")&&(r=this.getRowInfoFromEvent(n,".grid-row"),r)){var u=r.row.children,o=u.length,f=-1;for(i=0;i<o;i++)t===u[i]&&(f=i);this.createEditBox(r.dataIndex,f,t)}}},c.prototype._onRowMouseDown=function(n){var t=this.getRowInfoFromEvent(n,".grid-row"),i;t&&(i=n.target,n.which===1&&i.classList.contains("grid-tree-icon")?this._onToggle(t):n.which===3&&this._options&&this._options.disableRightClickSelection||i.classList.contains("grid-edit-box")||(this._selectRow(t.rowIndex,t.dataIndex,{ctrl:n.ctrlKey,shift:n.shiftKey,rightClick:n.which===3}),this.focus(0)))},c.prototype._onGutterClick=function(n){var t=this.getRowInfoFromEvent(n,".grid-gutter-row");t&&(this._selectedRows&&typeof this._selectedRows[t.rowIndex]=="number"||this._selectRow(t.rowIndex,t.dataIndex))},c.prototype._onBlur=function(n){var t=n.target;if(t.classList.contains("grid-edit-box")){n.stopPropagation();return}this._active=!1;this._updateSelectionStyles()},c.prototype._onFocus=function(n){var t=n.target;if(t.classList.contains("grid-edit-box")){n.stopPropagation();return}this._active=!0;this._updateSelectionStyles();this._updateAriaAttribute()},c.prototype._onKeyDown=function(t){var r={lo:-1,hi:-1},c=n.KeyCodes,l=this._canvas,h,i,e,s,u,f,o;if(!this._options.isGridEnabled)return!1;if(this._copyInProgress)return t.keyCode===27&&this._cancelable&&this._cancelable.cancel(),!1;if(this._count>0&&(r={lo:0,hi:this._expandedCount-1}),this._selectedIndex<0&&this._addSelection(r.lo),this._options.keyboardEventHandler&&this._options.keyboardEventHandler.keys.indexOf(t.key)!==-1&&(h=this._options.keyboardEventHandler.handler(t,this._dataSource,this._getDataIndex(this._selectedIndex)),h))return t.preventDefault(),!1;switch(t.keyCode){case 40:this._clearSelection();this._addSelection(Math.min(this._selectedIndex+1,r.hi),null,null,!0);break;case 38:this._clearSelection();this._addSelection(Math.max(this._selectedIndex-1,r.lo),null,null,!0);break;case 34:this._clearSelection();i=this._getVisibleRowIndices();this._selectedIndex<i.last?this._addSelection(i.last,null,null,!0):(e=i.last-i.first+1,this._addSelection(Math.min(this._selectedIndex+e,r.hi),null,null,!0));break;case 33:this._clearSelection();i=this._getVisibleRowIndices();this._selectedIndex>i.first?this._addSelection(i.first,null,null,!0):(e=i.last-i.first+1,this._addSelection(Math.max(this._selectedIndex-e,r.lo),null,null,!0));break;case 39:this.tryToggle(!0,t.shiftKey);break;case 37:if(!this.tryToggle(!1,t.shiftKey))for(s=this._getDataIndex(this._selectedIndex),u=s-1;u>=0;){if(s-u<=Math.abs(this._expandStates[u])){this._selectRow(this._getRowIndex(u),null,null,!0);break}u--}break;case 36:this._clearSelection();this._addSelection(r.lo,null,null,!0);break;case 35:this._clearSelection();this._addSelection(r.hi,null,null,!0);break;case 113:f=this.getRowInfo(this._getDataIndex(this._selectedIndex));f&&(o=this._getFirstEditableCellIndex(f.row.children),o>=0&&this.createEditBox(f.dataIndex,o,f.row.children[o]));break;default:return!0}return this.getSelectedRowIntoView(),t.preventDefault(),!1},c.protot